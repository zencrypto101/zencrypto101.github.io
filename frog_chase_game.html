
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê°œêµ¬ë¦¬ ì¡ê¸° ê²Œì„</title>
<style>
    body {
        font-family: 'Malgun Gothic', sans-serif;
        text-align: center;
        background-color: #f0f8ff;
        color: #333;
    }
    h1 {
        color: #0056b3;
    }
    #game-area {
        width: 800px;
        height: 600px;
        border: 2px solid #0056b3;
        margin: 20px auto;
        position: relative;
        background-color: #e6f7ff;
        overflow: hidden;
        cursor: crosshair;
    }
    .character {
        position: absolute;
        font-size: 40px;
        /* ì‚¬ìš©ìê°€ ìºë¦­í„° í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì„ ë°©ì§€ */
        user-select: none; 
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        transition: top 0.1s linear, left 0.1s linear;
    }
    #frog {
        cursor: pointer;
    }
    #score-board {
        font-size: 24px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>ë‹¤ëŒì¥ë¥¼ ì«“ëŠ” ê°œêµ¬ë¦¬ë¥¼ ì¡ì•„ë³´ì„¸ìš”!</h1>
<p id="score-board">ì ìˆ˜: <span id="score">0</span></p>

<div id="game-area">
    <div id="frog" class="character">ğŸ¸</div>
    <div id="squirrel" class="character">ğŸ¿ï¸</div>
</div>

<script>
    // --- ê²Œì„ ìš”ì†Œ ì„ íƒ ---
    const gameArea = document.getElementById('game-area');
    const frog = document.getElementById('frog');
    const squirrel = document.getElementById('squirrel');
    const scoreSpan = document.getElementById('score');

    // --- ê²Œì„ ë³€ìˆ˜ ì„¤ì • ---
    let score = 0;
    let gameRunning = true; // ê²Œì„ ì§„í–‰ ìƒíƒœ
    let animationFrameId; // requestAnimationFrame ID

    // ê²Œì„ ì˜ì—­ì˜ í¬ê¸° ì •ë³´
    const gameAreaRect = gameArea.getBoundingClientRect();

    // ìºë¦­í„°ë“¤ì˜ í˜„ì¬ ìœ„ì¹˜ (ì¢Œí‘œ)
    let frogPos = { x: 50, y: 50 };
    let squirrelPos = { x: 300, y: 300 };
    let squirrelTargetPos = { x: 300, y: 300 }; // ë‹¤ëŒì¥ì˜ ëª©í‘œ ìœ„ì¹˜

    // ì†ë„ ê´€ë ¨ ë³€ìˆ˜
    let frogBaseSpeed = 2.8; // ê°œêµ¬ë¦¬ ê¸°ë³¸ ì†ë„ ì¦ê°€
    let frogSpeed = frogBaseSpeed;
    let squirrelSpeed = 0.4; // ë‹¤ëŒì¥ ì´ë™ ì†ë„ (ë§¤ìš° ëŠë¦¬ê²Œ)
    let randomFactor = { x: 0, y: 0 };


    // --- ê²Œì„ ë¡œì§ ---

    // 1. ê²Œì„ì„ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ì¬ì‹œì‘í•˜ëŠ” í•¨ìˆ˜
    function resetGame() {
        score = 0;
        scoreSpan.textContent = score;
        gameRunning = true;
        
        frogPos = { x: 50, y: 50 };
        squirrelPos = { x: Math.random() * (gameAreaRect.width - 40), y: Math.random() * (gameAreaRect.height - 40) };
        setNewSquirrelTarget();

        frog.style.opacity = '1';
        frog.style.cursor = 'pointer';

        // ê¸°ì¡´ ê²Œì„ ë£¨í”„ê°€ ìˆë‹¤ë©´ ì¤‘ì§€
        if (animationFrameId) {
            cancelAnimationFrame(animationFrameId);
        }
        
        startGame();
    }

    // 2. ë‹¤ëŒì¥ì˜ ìƒˆë¡œìš´ ëª©í‘œ ì§€ì ì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
    function setNewSquirrelTarget() {
        if (!gameRunning) return;
        squirrelTargetPos.x = Math.random() * (gameAreaRect.width - 40);
        squirrelTargetPos.y = Math.random() * (gameAreaRect.height - 40);
    }

    // 3. ê°œêµ¬ë¦¬ë¥¼ ì¡ì•˜ì„ ë•Œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
    frog.addEventListener('click', (event) => {
        if (!gameRunning) return;
        
        event.stopPropagation(); 
        score++;
        scoreSpan.textContent = score;

        frog.style.opacity = '0';
        setTimeout(() => {
            frogPos.x = Math.random() * (gameAreaRect.width - 40);
            frogPos.y = Math.random() * (gameAreaRect.height - 40);
            frog.style.opacity = '1';
        }, 300);

        setNewSquirrelTarget(); // ë‹¤ëŒì¥ë„ ìƒˆë¡œìš´ ê³³ìœ¼ë¡œ ëª©í‘œ ë³€ê²½
    });

    // 4. ê°œêµ¬ë¦¬ ì›€ì§ì„ì— ë¬´ì‘ìœ„ì„±ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
    function updateRandomFactor() {
        randomFactor.x = (Math.random() - 0.5) * 2; 
        randomFactor.y = (Math.random() - 0.5) * 2;
        frogSpeed = frogBaseSpeed * (1 + Math.random() * 1.5); // ì†ë„ ë³€ë™í­ ì‚´ì§ ì¤„ì„
    }


    // 5. ê²Œì„ì˜ í•µì‹¬! ë§¤ í”„ë ˆì„ë§ˆë‹¤ ìºë¦­í„°ë“¤ì„ ì›€ì§ì„
    function gameLoop() {
        if (!gameRunning) return;

        // --- ë‹¤ëŒì¥ ì›€ì§ì„ ì²˜ë¦¬ ---
        const sq_dx = squirrelTargetPos.x - squirrelPos.x;
        const sq_dy = squirrelTargetPos.y - squirrelPos.y;
        const sq_dist = Math.sqrt(sq_dx * sq_dx + sq_dy * sq_dy);

        if (sq_dist > 1) { // ëª©í‘œì— ë„ë‹¬í•˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ë™
            squirrelPos.x += (sq_dx / sq_dist) * squirrelSpeed;
            squirrelPos.y += (sq_dy / sq_dist) * squirrelSpeed;
        }
        squirrel.style.left = squirrelPos.x + 'px';
        squirrel.style.top = squirrelPos.y + 'px';


        // --- ê°œêµ¬ë¦¬ ì›€ì§ì„ ì²˜ë¦¬ ---
        const fr_dx = squirrelPos.x - frogPos.x;
        const fr_dy = squirrelPos.y - frogPos.y;
        const fr_dist = Math.sqrt(fr_dx * fr_dx + fr_dy * fr_dy);

        // ê²Œì„ ì˜¤ë²„ ì¡°ê±´: ê°œêµ¬ë¦¬ê°€ ë‹¤ëŒì¥ì—ê²Œ ë‹¿ì•˜ì„ ë•Œ
        if (fr_dist < 20) {
            gameRunning = false;
            frog.style.cursor = 'default';
            
            setTimeout(() => {
                if (confirm('ì£½ì—ˆì–´! start again?')) { // ë©”ì‹œì§€ ë³€ê²½
                    resetGame();
                }
            }, 100);
            return; 
        }

        const targetVec = { x: fr_dx / fr_dist, y: fr_dy / fr_dist };
        
        const moveVec = {
            x: targetVec.x + randomFactor.x * 0.4,
            y: targetVec.y + randomFactor.y * 0.4
        };
        
        const moveMagnitude = Math.sqrt(moveVec.x * moveVec.x + moveVec.y * moveVec.y);
        const finalVec = {
            x: (moveVec.x / moveMagnitude) * frogSpeed,
            y: (moveVec.y / moveMagnitude) * frogSpeed
        };

        frogPos.x += finalVec.x;
        frogPos.y += finalVec.y;

        frogPos.x = Math.max(0, Math.min(gameAreaRect.width - 40, frogPos.x));
        frogPos.y = Math.max(0, Math.min(gameAreaRect.height - 40, frogPos.y));

        frog.style.left = frogPos.x + 'px';
        frog.style.top = frogPos.y + 'px';

        animationFrameId = requestAnimationFrame(gameLoop);
    }

    // --- ê²Œì„ ì‹œì‘ ---
    function startGame() {
        // 3ì´ˆë§ˆë‹¤ ë‹¤ëŒì¥ì˜ ëª©í‘œ ì§€ì  ë³€ê²½
        setInterval(setNewSquirrelTarget, 3000);
        // 0.5ì´ˆë§ˆë‹¤ ê°œêµ¬ë¦¬ ì›€ì§ì„ íŠ¹ì„±(ë°©í–¥, ì†ë„) ë³€ê²½
        setInterval(updateRandomFactor, 500);

        setNewSquirrelTarget();
        gameLoop();
    }

    // ìµœì´ˆ ê²Œì„ ì‹œì‘
    startGame();

</script>

</body>
</html>
